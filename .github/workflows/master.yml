name: Master Build
on: [push]
jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    
    - name: Check out code
      uses: actions/checkout@v2

    - name: Build
      run: ./build.sh
      shell: bash
    
    
    - uses: 8398a7/action-slack@8f3d01dfe362ef77e02f95b5b319d91723f53ca3
      with:
        status: ${{ job.status }}
        author_name: ${{ github.workflow }}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      if: failure()

    - uses: 8398a7/action-slack@8f3d01dfe362ef77e02f95b5b319d91723f53ca3
      with:
        status: ${{ job.status }}
        author_name: ${{ github.workflow }}
        text: Published new version ${{ steps.tag_action.outputs.new_tag }}
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      if: success()

